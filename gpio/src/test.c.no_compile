#include <stdio.h>
#include <unistd.h>
#include <bcm2835.h>

//#define OUTPUT_PIN RPI_GPIO_P1_11
#define INPUT_PIN  RPI_V2_GPIO_P1_07

int main(int argc, char *argv) {
  if (!bcm2835_init()) {
    return 1;
  }

  // Set the output pin as an output
 // bcm2835_gpio_fsel(OUTPUT_PIN, BCM2835_GPIO_FSEL_OUTP);

  // Set the input pin as input
  bcm2835_gpio_fsel(INPUT_PIN, BCM2835_GPIO_FSEL_INPT);
//  bcm2835_gpio_set_pud(INPUT_PIN, BCM2835_GPIO_PUD_UP);

  while (1) {
    /*
    // Toggle the output pin on/off
    bcm2835_gpio_write(OUTPUT_PIN, HIGH);
    bcm2835_delay(500);
    bcm2835_gpio_write(OUTPUT_PIN, LOW);
    bcm2835_delay(500);
    */

    // Read some data
    uint8_t value = bcm2835_gpio_lev(INPUT_PIN);
    printf("Read from GPIO %d: %d\n", INPUT_PIN, value);

    sleep(1);
  }

  bcm2835_close();

  return 0;
}

